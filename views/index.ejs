<%- include('header') %>

<div class="hero-section" style="background-image: url('<%= siteSettings.heroImageUrl %>');">
    <div class="hero-overlay">
        <div class="container">
            <div class="hero-content">
                <h1 style="font-size: 3rem; margin-bottom: 10px; font-weight: bold;"><%= siteSettings.heroTitle %></h1>
                <p style="font-size: 1.2rem; max-width: 600px; margin: 0 auto 30px;"><%= siteSettings.heroText %></p>
                
                <div class="search-container" style="max-width: 600px; margin: 0 auto;">
                    <form action="/" method="GET" style="display: flex; gap: 10px;">
                        <input type="text" name="name" value="<%= searchQuery %>" 
                               placeholder="Search by name (e.g. John Doe)..." 
                               style="flex: 1; padding: 15px 25px; border-radius: 50px; border: none; font-size: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                        <button type="submit" class="btn" style="border-radius: 50px; padding: 0 30px; background: var(--blue);">Search</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<main class="container" style="margin-top: 50px; margin-bottom: 80px;">
    
<div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 30px;">
    <h2 style="color: var(--navy); margin: 0;">Recent Memorials</h2>
    
    <% if (userLoggedIn) { %>
        <a href="/create" class="btn">+ Create a Tribute</a>
    <% } else { %>
        <a href="/login" style="font-size: 0.9rem; color: var(--blue);">Login to add a tribute</a>
    <% } %>
</div>

    <div class="tribute-grid">
        <% if (tributes.length > 0) { %>
            <% tributes.forEach(t => { %>
                <a href="/tribute/<%= t.id %>" class="card">
                    <img src="<%= t.photo %>" alt="<%= t.firstName %>">
                    <div class="card-content">
                        <h3 style="margin: 0 0 5px; color: var(--navy); font-size: 1.3rem;">
                            <%= t.firstName %> <%= t.lastName %>
                        </h3>
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px;">
                            <%= t.funeralHome %>
                        </p>
                        <span style="color: var(--blue); font-weight: bold; font-size: 0.85rem;">View Profile &rarr;</span>
                    </div>
                </a>
            <% }) %>
        <% } else { %>
            <div style="grid-column: 1 / -1; text-align: center; padding: 50px; background: white; border-radius: 12px; border: 1px dashed #ccc;">
                <p style="font-size: 1.2rem; color: #888;">No tributes found matching "<%= searchQuery %>".</p>
                <a href="/" style="color: var(--blue);">View all memorials</a>
            </div>
        <% } %>
    </div>

</main>

<%- include('footer') %>